# 新現場写真アプリ 詳細仕様書

## プロジェクト概要

### プロジェクト名
新現場写真管理システム (GenbaPhoto Next)

### 目的
現行の現場写真一括印刷アプリ（v1.36）の問題点を解決し、建設現場の写真管理業務を効率化する次世代Webアプリケーションを開発する。

### ターゲットユーザー
- 建設現場監督・技術者
- 工事写真管理担当者
- 品質管理・安全管理担当者
- 現場作業員

## システム要件

### 技術スタック

#### フロントエンド
- **フレームワーク**: Vue.js 3 (Composition API)
- **UI ライブラリ**: Tailwind CSS + HeadlessUI
- **状態管理**: Pinia
- **ビルドツール**: Vite
- **PWA対応**: Vite PWA Plugin

#### バックエンド（将来拡張）
- **API**: RESTful API (Express.js/Node.js)
- **データベース**: SQLite → PostgreSQL（規模拡大時）
- **ファイルストレージ**: ローカル → AWS S3/Cloudinary（クラウド移行時）

#### 開発・デプロイ
- **言語**: TypeScript
- **テスト**: Vitest + Vue Testing Library
- **リンター**: ESLint + Prettier
- **CI/CD**: GitHub Actions
- **パッケージマネージャー**: pnpm

### 動作環境
- **サポートブラウザ**: Chrome 90+, Edge 90+, Firefox 88+, Safari 14+
- **デバイス**: デスクトップ、タブレット、スマートフォン
- **OS**: Windows 10/11, macOS 10.15+, Android 8+, iOS 13+
- **オフライン対応**: PWAによる基本機能のオフライン動作

## 機能仕様

### 1. 写真管理機能

#### 1.1 写真アップロード
**基本機能**
- ドラッグ&ドロップ対応
- 複数ファイル一括選択
- カメラ撮影（モバイル）
- クリップボードからの貼り付け

**制限事項**
- 対応形式: JPEG, PNG, WebP, HEIC（変換）
- ファイルサイズ: 最大100MB/ファイル
- 同時アップロード: 最大100枚
- 総容量制限: 5GB（ローカルストレージ使用時）

**画質設定**
- 高画質: 2560px（推奨）
- 標準: 1920px
- 軽量: 1280px（モバイル推奨）
- カスタム: 任意解像度設定

#### 1.2 写真情報管理
**メタデータ**
- 撮影日時（EXIF自動取得 + 手動編集）
- GPS位置情報（利用可能時自動取得）
- 撮影者情報
- 工種・工程分類
- 撮影箇所・詳細位置

**分類・検索**
- フォルダ/タグによる分類
- 工種別カテゴリ管理
- 撮影日・撮影者・場所での絞り込み
- 全文検索（コメント・場所名等）
- 類似画像検索（AI支援）

#### 1.3 画像編集
**基本編集**
- 回転・反転
- トリミング
- 明度・コントラスト調整
- 注釈・矢印・文字入れ
- モザイク・ぼかし処理

**測定・マーキング**
- 寸法測定（基準長設定）
- エリア測定
- 角度測定
- 欠陥箇所マーキング

### 2. レイアウト・印刷機能

#### 2.1 レイアウト設定
**ページ設定**
- 用紙サイズ: A4, A3, B4, B5
- 向き: 縦・横
- 余白設定: 標準・狭い・広い・カスタム
- 写真配置: 1〜12枚/ページ

**レイアウトパターン**
- グリッドレイアウト（2×2, 3×2, 4×2等）
- 自由配置レイアウト
- テンプレート選択（工事写真、品質管理等）
- レスポンシブ印刷プレビュー

#### 2.2 テキスト・情報表示
**ヘッダー情報**
- 工事名・現場名
- 工事番号・契約番号
- 発注者・受注者情報
- 印刷日・作成者
- ページ番号・総ページ数

**写真情報**
- 撮影日時（和暦/西暦選択）
- 撮影場所・工種
- 撮影者・検査者
- コメント・備考
- 承認印・検印欄

**フォント設定**
- フォント種類: システムフォント + Webフォント
- サイズ: 6pt〜24pt
- スタイル: 標準・太字・斜体
- 色: フルカラー対応

#### 2.3 印刷・出力
**印刷オプション**
- プレビュー機能（ページネーション対応）
- 印刷品質選択（draft/normal/high）
- カラー・モノクロ選択
- 部数設定・両面印刷対応

**エクスポート機能**
- PDF出力（A4/A3対応）
- Excel出力（写真付き台帳）
- Word出力（報告書テンプレート）
- ZIP圧縮（写真+メタデータ）

### 3. データ管理機能

#### 3.1 プロジェクト管理
**プロジェクト情報**
- プロジェクト名・説明
- 開始日・完了予定日
- 関係者情報（発注者・受注者・監督者）
- 工事概要・所在地

**進捗管理**
- 工程別進捗率
- 写真撮影チェックリスト
- 検査項目管理
- スケジュール連携

#### 3.2 バックアップ・同期
**ローカルバックアップ**
- 自動バックアップ（日次・週次）
- 手動バックアップ作成
- インクリメンタルバックアップ
- バックアップ復元機能

**クラウド連携（拡張機能）**
- Google Drive連携
- OneDrive連携
- 独自クラウドストレージ
- チーム間データ共有

#### 3.3 インポート・エクスポート
**データインポート**
- 既存アプリからの移行
- CSV/Excelからの一括登録
- 他システムAPIからのデータ取得

**データエクスポート**
- 標準的なフォーマットでの出力
- 他システム連携用API
- アーカイブ機能

### 4. ユーザーインターフェース

#### 4.1 デスクトップUI
**レイアウト**
- 3ペイン構成（ファイル一覧・プレビュー・設定）
- ドッキング可能なパネル
- カスタマイズ可能なツールバー
- キーボードショートカット完全対応

**操作性**
- ドラッグ&ドロップ操作
- 右クリックコンテキストメニュー
- 複数選択・一括操作
- 元に戻す・やり直し機能

#### 4.2 モバイルUI
**レスポンシブ対応**
- タッチ操作最適化
- スワイプ・ピンチ操作
- 縦横画面自動切り替え
- 片手操作対応

**モバイル固有機能**
- カメラ連携撮影
- GPS位置情報取得
- バーコード・QRコード読取
- 音声メモ機能

#### 4.3 アクセシビリティ
**WCAG 2.1 AA準拠**
- キーボード操作のみでの全機能利用
- スクリーンリーダー対応
- 高コントラスト表示
- 文字サイズ拡大対応
- 音声ガイド（オプション）

### 5. セキュリティ・品質管理

#### 5.1 セキュリティ対策
**データ保護**
- クライアントサイド暗号化
- セキュアな通信（HTTPS強制）
- XSS・CSRF対策実装
- 入力値サニタイゼーション

**アクセス制御**
- 役割ベースアクセス制御（RBAC）
- 二要素認証対応
- セッション管理・タイムアウト
- 操作ログ記録

#### 5.2 品質保証
**性能要件**
- 初回読み込み: 3秒以内
- 写真表示: 1秒以内
- レスポンス時間: 100ms以内
- メモリ使用量: 500MB以下

**可用性**
- オフライン動作対応
- エラー自動復旧
- データ整合性チェック
- 定期的な健全性診断

## 非機能要件

### パフォーマンス
- **応答時間**: 操作からレスポンス100ms以内
- **スループット**: 同時100ユーザー対応
- **画像処理**: 50枚一括処理5秒以内
- **メモリ効率**: 使用メモリ500MB以下維持

### 拡張性
- **モジュラー設計**: 機能別コンポーネント分離
- **プラグイン対応**: サードパーティ機能拡張
- **API設計**: RESTful API + GraphQL対応
- **マルチテナント**: 将来的な複数組織対応

### 保守性
- **コード品質**: TypeScript + 単体テスト90%カバレッジ
- **ドキュメント**: OpenAPI仕様 + コンポーネントドキュメント
- **監視**: アプリケーション監視・エラートラッキング
- **更新**: 自動更新・段階的ロールアウト

### 互換性
- **データ移行**: 既存v1.36からのスムーズな移行
- **ファイル形式**: 業界標準フォーマット対応
- **他システム**: 既存CAD・BIM・工程管理システム連携
- **標準準拠**: 建設業界のデータ交換標準対応

## 開発計画

### Phase 1: 基盤開発（3ヶ月）
**目標**: 基本的な写真管理・印刷機能の実装
- プロジェクトセットアップ・環境構築
- 写真アップロード・表示機能
- 基本的なレイアウト・印刷機能
- データ永続化機能

**成果物**
- 動作するMVP版アプリケーション
- 基本機能のユーザーテスト完了
- 性能・セキュリティ基準クリア

### Phase 2: 機能拡充（2ヶ月）
**目標**: 画像編集・検索・分類機能の追加
- 画像編集・注釈機能
- 検索・フィルタリング機能
- カテゴリ・タグ管理
- データインポート・エクスポート

### Phase 3: 高度機能（2ヶ月）
**目標**: AI機能・クラウド連携・モバイル最適化
- AI支援機能（類似画像検索・自動分類）
- クラウドストレージ連携
- モバイルアプリ最適化
- チーム協業機能

### Phase 4: 運用・保守（継続）
**目標**: 安定運用・継続改善
- パフォーマンス監視・最適化
- ユーザーフィードバック反映
- セキュリティアップデート
- 新機能開発・拡張

## リスク管理

### 技術的リスク
**パフォーマンス問題**
- リスク: 大量画像処理時の性能低下
- 対策: 画像圧縮・仮想スクロール・Web Workers活用

**ブラウザ互換性**
- リスク: 古いブラウザでの動作不良
- 対策: Polyfill・Progressive Enhancement・代替UI提供

**データ損失**
- リスク: ローカルストレージ容量・データ破損
- 対策: 定期バックアップ・データ検証・復旧機能

### 事業的リスク
**ユーザー採用**
- リスク: 既存アプリからの移行抵抗
- 対策: 段階的移行・データ移行支援・操作研修提供

**競合対応**
- リスク: 競合他社の類似製品リリース
- 対策: 独自価値提供・継続的機能改善・ユーザーロックイン

## 成功指標（KPI）

### 技術指標
- ページ読み込み時間: 平均3秒以下
- エラー率: 1%以下
- 可用性: 99.5%以上
- ユーザビリティスコア: 4.5/5以上

### 事業指標
- ユーザー採用率: 既存ユーザーの80%が6ヶ月以内に移行
- 操作効率: 既存アプリと比較して作業時間30%削減
- サポート問い合わせ: 既存比50%削減
- ユーザー満足度: NPS（Net Promoter Score）40以上

## まとめ

本仕様書に基づく新現場写真アプリは、現行アプリの問題点を解決し、現代的な技術スタックとUX設計により、建設現場の写真管理業務を大幅に効率化することを目的としています。

段階的な開発アプローチにより、リスクを最小化しながら確実に価値を提供し、将来的な拡張性も確保した持続可能なソリューションとして設計されています。

---

**文書バージョン**: 1.0
**作成日**: 2025年9月8日
**作成者**: Claude (Anthropic)
**承認者**: [要設定]
**次回レビュー日**: [要設定]